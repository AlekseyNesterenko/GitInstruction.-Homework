# **Инстуркция по работе с системой контроля версий GIT**

## Что такое GIT?

![Git logo](Git-Icon.png)

**Git** — система управления версиями с распределенной архитектурой.
В Git каждая рабочая копия кода сама по себе является репозиторием. Это позволяет всем разработчикам хранить историю изменений в полном объеме.

Система Git рассчитана прежде всего на создание веток и использование тегов. Поэтому процедуры с участием веток и тегов (например, объединение и возврат к предыдущей версии) сохраняются в истории изменений. Не все системы управления версиями обладают настолько широкими возможностями отслеживания.

Начинающим разработчикам, которые хотят приобрести ценные навыки работы с инструментами разработки ПО, следует изучить Git как одну из систем управления версиями.

## С чего начать?
Открываем программу ***Visual Studio Code***  и левом верхнем углу открываем **Терминал**.

Далее в поле Терминала необходимо ввести свое Имя и email, по которым Git будет вас идентифицировать. 
Для этого используем команды:

    git config –global user.name “имя для git”

    git config –global user.email “email для git”
Где в кавычках указывается ваше имя и электронная почта. 

Чтобы убедиться, что Git установлен и работает корректно, вводим команду в терминале:

    git --version

При корректной работе программы должны получить следующее сообщение:

    git version 2.37.2.windows.2

## 1. Инициализация репозитория

***Репозиторий Git*** — это виртуальное хранилище проекта. В нем можно хранить версии кода для доступа по мере необходимости.

Чтобы инициализировать новый репозиторий, и Git мог отслеживать изменения в проекте, нужно ввести в терминале команду:

    git init

После этого можно увидеть сообщение: 

    Initialized empty Git repository in C:/Users/lesha/OneDrive/Рабочий стол/Git/.git/

Что означает, что инициализирован репозиторий в папке, до которой указан путь. 

## 2. Проверка состояния репозитория

Важно постоянно отслеживать состояние проекта. Для этого используется следующая команда:

    git status

В зависимости от сообщения, которое последует после ввода команды, можно узнать в каком статусе находится проект. 

Например: 

    fatal: not a git repository (or any of the parent directories): .git

Данное сообщение указывает на то, что не проведена инициализация репозитория (команда git init).

    On branch master

    No commits yet

    nothing to commit (create/copy files and use "git add" to track)

Сообщение означает, что в проекте еще не было совершено никаких изменений. 

    On branch master
    Changes not staged for commit:
    (use "git add <file>..." to update what will be committed)
    (use "git restore <file>..." to discard changes in working directory)
        modified:   InstructionGit.md

    no changes added to commit (use "git add" and/or "git commit -a")

Означает, что есть неотслеживаемые изменения. 

    On branch master
    Changes to be committed:
    (use "git restore --staged <file>..." to unstage)
        modified:   InstructionGit.md

Означает, что изменения, внесенные в проект, добавлены для отслеживания, но не зафиксированы. 

 Минимальные знания английского языка позволяют без затруднений понять, в каком статусе находиться проект. 

Довольно полезной  является команда: 

    git diff

Она показывает текущие изменения проекта - отличия проекта от последней зафиксированной версии. 
 
 Следующая команда: 

    git log

Показывает версии проекта, которые были зафиксированы.

Выглядит это следующим образом:

    commit 4641a729fbbe3f6722357f5b24e0ad258680606a (HEAD -> master)
    Author: Aleksey Nesterenko <naa1205@bk.ru>
    Date:   Thu Aug 25 21:49:24 2022 +0700

    Git init info added

    commit 7aeb9d28e9c06aa7061cdfb59396c7ac4d93109d
    Author: Aleksey Nesterenko <naa1205@bk.ru>
    Date:   Thu Aug 25 21:41:46 2022 +0700

    Subheadings added

Где ***"commit 7aeb9d28e9c06aa7061cdfb59396c7ac4d93109d"*** показывает версию проекта с ее *идентификатором*. 

Для просмотра версий проекта в удобном виде без лишней информации о том, когда и кем были внесены изменения, можно использовать дополнительную функцию **ONELINE** для команды **git log**:

    git log --oneline

Выглядит это следующим образом:

    PS C:\Users\lesha\OneDrive\Рабочий стол\Git> git log --oneline
    b54f95b (HEAD -> master) git diff info added
    fb2a283 git status info added
    2b0af9d corrected git init info
    5e18e21 what to begin
    97c7167 git init additional info added

Таким образом можно в удобном виде просмотреть версии проекта. 

Еще одной дополнительной функцией команды **git log** является **ALL**:

    git log --all

Позволяет отобразить в терминале ВСЕ версии проекта. 

Такие дополнительные функции можно комбинировать, чтобы в одно действие получить необходимую информацию в удобном виде:

    git log --oneline --all

## 3. Добавление версионности

Одна из важнейших команд при работе с Git является 

    git add

Она сообщает Git, что вы хотите включить изменения в конкретном файле в следующий коммит.

После **add** при вводе команды, необходимо через проблем указать наименование файла, к которому планируется добавление новой версии. 

**Достаточно ввести несколько первых символов названия файла и  нажать кнопку **Tab**, и название файла полностью укажется в команде.*

## 4. Фиксация изменений

Неотъемлемой командой после **git add** является команда:

    git commit

Она "сохраняет" текущие изменения и создает версию файла/проекта для отслеживания с последними изменениями. 

К данной команде также применимы дополнительные функции. 

* **-m**  позволяет добавить сообщение к коммиту. В кавычках указывается необходимы комментарий;


      git commit -m "git add info added"

* **-a** выполнение коммита со всеми изменениями файле без ввода комманды git add;

        git commit -a

* **-am** (*для опытных пользователей*) эта комбинация параметров **-a** и **-m** создает коммит всех проиндексированных изменений и добавляет к коммиту  комментарий.

        git commit -am "Comment"

Важно после каждых изменений проводить коммиты, чтобы можно было отслеживать все изменения проекта. 

*! Изменения лучше всего "фиксировать" т.н. неделимыми группами. То есть, чтобы изменения можно было описать односложным комментарием.*

После проведения коммита можно увидеть следующее сообщение в терминале:

    [master d741700] git add info added
    1 file changed, 12 insertions(+), 2 deletions(-)

Что означает, что коммит успешно выполнен, и добавлена новая версия проекта. 

## 5. Переключение между версиями
 
При использовании команды **git log** можно увидеть список всех коммитов, которые были выполнены. 

    35a38b7 (HEAD -> master) git commit info added
    d741700 git add info added
    d237d75 git log info added
    b54f95b git diff info added
    fb2a283 git status info added
    2b0af9d corrected git init info
    5e18e21 what to begin
    7c79167 git init additional info added
    54a28bd git general info added
    4641a72 Git init info added
    7aeb9d2 Subheadings added
    f5c3b4c Main header added
    55e5962 Inite commit

Для перехода к определенной версии комиита и просмотра состояния на определенный момент используется команда:

    git checkout
 
 Через пробел после слова **checkout** необходимо указать идентификатор коммита, который нужно просмотреть. 

    git checkout 7c79167

 Для перехода обратно к текущей версии проекта необходимо ввести:

    git checkout master

## 6. Ветвление

С точки зрения логики, **ветка** – это последовательность коммитов. Чтобы проще было понять, что такое ветка, рассматривайте ее как некоторую временную шкалу. Коммиты в ней – снимки интересных моментов, идущие друг за другом в хронологической последовательности.

**Преимущество веток в их независимости.** Вы можете вносить изменения в файлы в одной ветке, например, пробовать новую функцию, и они никак не скажутся на файлах в другой ветке. Изначально в репозитории одна ветка, но позже мы рассмотрим, как создавать другие.

### Просмотр существующих веток

Для просмотра всех существующих веток используется следующая команда:

    git branch

После ввода этой команда отобразится список всех веток, которые есть в проекте. При этом будет также отображено звездочкой (*), на какой ветке мы сейчас находимся: 

     branches_view
     create_branch
     delete_branch
    *master
     merging

Чтобы перейти в существующую ветку, необходимо к команде *CHECKOUT* дописать имя ветки: 

    git checkout <Имя_существующей_ветки>

### Создание новых веток

Для создания новой ветки необходимо ввести следующую команду:

    git branch <Имя_новой_ветки>

Где вместо "<Имя_новой_ветки>" указывается наименование ветки, которую хотим создать. 

Создавать можно необходимое количество веток в проекте.

### Слияние веток

После того как работа в ветке закончена, и информацию нужно перенести в основную ветку, нужно провести команду слияния веток.

    git merge <Имя_ветки>

Слияние проходит так, что вся информация, которая находится на ветке, добавиться в текущую. Поэтому всегда важно знать, в какой ветке вносятся изменения.

#### **Разрешение конфликтов**

В процессе слияния веток зачастую возникают конфликты. 
 
**Конфликт** возникает, когда в двух ветках была изменена одна и та же строка в файле или когда некий файл удален в одной ветке и отредактирован в другой. Как правило, конфликты возникают при работе в команде.

Большую часть слияний система Git способна обрабатывать самостоятельно с помощью функций автоматического слияния.

При возникновении конфликта можно наблюдать следующие строки в терминале:

    Auto-merging InstructionGit.md
    CONFLICT (content): Merge conflict in InstructionGit.md
    Automatic merge failed; fix conflicts and then commit the result.

Это означает, что необходимо вручную просмотреть, какую информацию нужно оставить. 
После ручной "модерации" необходимо провести коммит, чтобы изменения зафиксировались. 

### Удаление веток

После того, как работа в ветке закончена, и она слита с основной веткой, ее необходимо удалить. 

Для этого можно использовать ключ <-d> для команды *BRANCH*:

    git branch -d <Имя_ветки>

После успешного удаления ветки должно отобразиться следующее сообщение: 

    Deleted branch <Имя_ветки>

## 7. Удаленные репозитории

Чтобы иметь возможность совместной работы над каким-либо Git-проектом, необходимо знать как управлять удалёнными репозиториями. 

**Удалённые репозитории** — это модификации проекта, которые хранятся в интернете или ещё где-то в сети. Их может быть несколько, каждый из которых, как правило, доступен для вас либо только на чтение, либо на чтение и запись. 

Совместная работа включает в себя управление удалёнными репозиториями и помещение (push) и получение (pull) данных в и из них тогда, когда нужно обменяться результатами работы.

### Клонирование удаленного репозитория

Необходимость клонировать существующий удаленный репозиторий возникает в ситуациях, когда вы решаете поработать над уже существующим кодом. Для выполнения этой операции в Git предусмотрена следующая команда:
    
    git clone <ссылка_на_репозиторий>
    
Ссылку на удаленный репозиторий можно получить, нажав на зеленую кнопку **Code** на главной странице репозитория на GitHub.

Также необходимо обращать внимание, в какой папке находиться репозиторий. 
Если необходимо сменить папку, можно использовать следующую команду:

    cd <Название_папки_склонированного_репозитория>
    
### Создание нового репозитория на GitHub

До текущего момента мы работали с локальным репозиторием, который сохранялся в папке на компьютере. Если мы хотим иметь возможность сохранения проекта в интернете, создадим репозиторий на Github. Для начала нужно зарегистрироваться на сайте github.com под именем <Имя_пользователя>.

После регистрации нажимаем зеленую кнопку **Create a new repository**  или **New**(если находимя непосредственно в профиле) и вводим название репозитория. Далее необходимо следовать инструкциям в зависимости от ситуации, выбираем тип Public (репозиторий всегда Public для бесплатной версии) и нажимаем Create.

В результате мы создали репозиторий на сайте Github.

### Связывание локального и удаленного репозитория

Чтобы связать локальный и удаленный репозитории, необходимо ввести последовательность команд. Их подскажет GitHub после создания репозитория. 
Пример:

    **git remote add origin https://github.com/AlekseyNesterenko/Test.git**  (подключить удаленный репозиторий под именем origin) 
    **git branch -M master**  (в какую ветку загруpbnm изменения)
    **git push -u origin master** (отправить репозитория на GitHub)
    
Если работа с GitHub происходит впервые, то после ввода 3й команды в терминале нужно "подружить" GitHub и VScode. Появится окно, где нужно ввести **Username** и **Password** от GitHub. Это нужно для того, чтобы VScode понимал, есть ли у вас доступ на внесение изменений в указанный удаленный репозиторий. 
*Данную процедуру необходимо провести один раз.*

### Отправка изменений в удаленный репозиторий

Для того, чтобы оправить изменения в удаленый репозиторий, необходимо ввести в терминал следующую команду:

    git push
    
### Получение изменений из удаленного репозитория

Для того, чтобы получить актуальное состояние удаленного репозитория и сохранить на локальном, нужно ввеси следующую команду:

    git pull

Перед комитами  и/или отправкой изменений в удаленный репозиторий всегда важно обновлять локальный репозиторий через команду **PULL**, чтобы быть в курсе уже внесенных другими пользователями изменений (если работF над проектом просходит в группе)

### Создание Fork репозитория и Pull Request

Когда нам нравится чей-то репозиторий и мы хотели бы иметь его в собственном аккаунте на GitHub, мы делаем **форк** («вилку») этого репозитория, чтобы иметь возможность работать с ним отдельно.

Когда мы делаем форк репозитория, мы получаем экземпляр всего репозитория, со всей его историей. После форка мы можем делать с ним все, что угодно: оригинальная версия при этом не будет задета.

Чтобы сделать форк репозитория, нужно нажать кнопку **«Fork»** в верху страницы. Таким образом вы создадите экземпляр всего этого репозитория в своем аккаунте.

Когда репозиторий уже есть в вашем аккаунте, вы можете клонировать его на свое устройство и в дальнейшем работать с ним локально.

Чтобы клонировать репозиторий, нажмите кнопку **«Code»**, скопируйте ссылку и введите следующую команду в терминале: 

    git clone <Ссылка_на_репозиторий>

Переходим в клонированную директорию через команду **CD**

При работе с репозиторием хорошей практикой считается создание отдельной ветки для внесения изменений, причем это не зависит от размеров проекта.

Имя ветки должно быть коротким и отражать те изменения, которые вы вносите.

После вненсеия изменений и сохранения, репозиторий можно отправить на GitHub.

Для того, чтобы подделиться своими правками с владельцем оригинального репозитория, перейдите в свой fork репозитория на GitHub и нажмите кнопку **Compare & pull request**.

Введите необходимые детали относительно того, что именно вы сделали. После этого можно нажать кнопку внизу **Create pull request**.

## Итог. 

Кратко повторим изученные команды:

* **git init** - инициализация репозитория
* **git status** - проверка статуса 
* **git log (--oneline; --all)** - отображение всех коммитов
* **git diff** - отображение отличий текущей версии от последней зафиксированной
* **git add** и **git commit (-m; -a)** - создание нового коммита с текущими изменениями
* **git checkout** - переключение между версиями
* **git branch** - просмотр существующих веток в проекте
* **git branch (-d) <Имя ветки>** - создание (удаление) новой ветки
* **git merge** - слияние веток
*  **git clone** - "скопировать" какой-либо репозиторий на свое утройство
*  **git push** - отправить изменения в удаленный репозиторий
*  **git pull** - получить текущую версию проекта, хранящуюся в удаленном репозитории

*  **GitHub** - служба размещения в Интернете репозиториев Git
